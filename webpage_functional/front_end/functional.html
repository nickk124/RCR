<!DOCTYPE html>
<html>
  <meta name="viewport" content="width=device-width, initial-scale=1"> <!--new-->
  <head>
      <script type="text/javascript"><!--
  // These variables are used by the web2py_ajax_init function in web2py_ajax.js (which is loaded below).
  var w2p_ajax_confirm_message = "Are you sure you want to delete this object?";
  var w2p_ajax_date_format = "%Y-%m-%d";
  var w2p_ajax_datetime_format = "%Y-%m-%d %H:%M:%S";
  //--></script>
    <title>Functional RCR Calculator</title>
    <script src="/rcr/static/js/jquery.js" type="text/javascript"></script><link href="/rcr/static/css/calendar.css" rel="stylesheet" type="text/css" /><script src="/rcr/static/js/calendar.js" type="text/javascript"></script><script src="/rcr/static/js/web2py.js" type="text/javascript"></script><link href="/rcr/static/css/rcr2.css" rel="stylesheet" type="text/css" />
    <!--<link rel= "stylesheet" type= "text/css" href= "{{URL('static','css/rcr2.css')}}">-->
    <link href='https://fonts.googleapis.com/css?family=Josefin+Sans:300' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-1.0.4.min.css" type="text/css" />
    <link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.0.4.min.css" type="text/css" />

    <!--<script href= "{{URL('static','js/jquery.js') }}" type="text/javascript"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-1.0.4.min.js"></script>
    <script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.0.4.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>
<!--////////////////////////////////////////////////////////////////////////////-->
<!-- NAVIGATION BAR -->
<!--////////////////////////////////////////////////////////////////////////////-->
    <div id="wrap">
    <ul class="navbar">
            <li style="margin-left:50px;"><a href="/rcr/calculator">Home</a> </li>
            <li><a href="/rcr/calculator/value">Single-Value Calculator</a></li>
            <li><a style="background-color:#5b8dd9;">Functional Calculator</a></li>
            <li><a href="/rcr/calculator/downloads">Downloads</a> </li>
            <li><a href="/rcr/calculator/contact">Contact Us</a> </li>
    </ul>
    </div>
<!--////////////////////////////////////////////////////////////////////////////-->
<!-- CALCULATOR -->
<!--////////////////////////////////////////////////////////////////////////////-->

<!--////////////////////////////////////////////////////////////////////////////-->
<!-- DATA INPUT SECTION -->
<!--////////////////////////////////////////////////////////////////////////////-->
    <div id="RMInput">
      <h1 style="font-size:3.5em;"> Functional RCR Calculator</h1>
            <br>

      <h1 style="font-size:2.5em;">Input Data</h1>
        <div id="StepOne">
            <div  id="ButtonSection">
                <h2> Select Data Type: </h2>
                <button id='Unweighted' class="Button DataType"> Equal Weights (Default) </button>
                <button id='Weighted' class="Button DataType"> Unequal Weights </button>
                <button id='ErrorBars' class="Button DataType"> Error Bars </button>
                <br>
                <br>

                <i style="padding-top:10px">Format: One data point per line: List the independent (x) values followed by the dependent (y) value, seperated by white space. (In the case of multiple x values per data point, download and use the source code directly).</i>
                <br>
                <br>
                <i style="padding-top:10px">Weights, if unequal, should be included on the same line, sparated by white space.</i>
                <br>
                <br>
                <i style="padding-top:10px">Alternatively, (symmetric, y) error bars may be entered instead of weights. These will be converted to weights using weight = 1/error<sup>2</sup>. However, if the scatter of the data is too large to be accounted for by the error bars alone, extrinsic scatter dominates and "Equal Weights" should be selected instead (&sect8.2.1, Maples et al. 2018).</i>
                <br>
                <br>
            </div>
            <div id="RejectionMethod" style="padding-top:25px;  position:relative; float:right">
                <textarea class="dataTable" id="inputTextAreaData" style="height:300px"></textarea>
            </div>
        </div>
            <!-- OLD INPUT SECTION -->
            <!--<div id="StepOne">
              <div  id="ButtonSection">
                <h2> Select Model Function Type: </h2>
                <div style="display: inline; float:left">
                  <i style="padding-top:10px">For large datasets and/or for non-listed custom functions, <br>it is recommended to just download the C++ source code (documentation included) <a href="/rcr/calculator/downloads">here</a>.</i>
                  <br>
                  <br>
                  <div class="dropdown">
                    <button class="dropbtn">(Select Function Here)</button>
                    <div class="dropdown-content">
                      <button id="Linear" class="Button DataType">Linear</button>
                      <br>
                      <button id="Quadratic" class="Button DataType">Quadratic</button>
                      <br>
                      <button id="Cubic" class="Button DataType">Cubic</button>
                      <br>
                      <button id="PowerLaw" class="Button DataType">Power Law</button>
                      <br>
                      <button id="Exponential" class="Button DataType">Exponential</button>
                      <br>
                      <button id="Logarithmic" class="Button DataType">Logarithmic</button>
                    </div>
                  </div>

                  <br>
                  <br>
                  <h3> Formatting: </h3>
                  <i>You can simply paste in your data from sources such as Excel tables or other tab\newline-delimited data. </i>
                  <br>
                  <br>
                  <b style="padding-top:10px">y data format:</b><i style="padding-top:10px"> one y value per line. y value uncertainties should be included on the same line to the right of the y data, seperated by white space. Weights, if unequal, should be included on the same line furthest to the right, separated by white space.</i>
                  <br>
                  <br>
                  <b style="padding-top:10px">x data format:</b><i style="padding-top:10px"> For the single independent variable case, one x value per line.</i>
                  <br>
                  <br>
                  <b style="padding-top:10px">parameter(s) guess format:</b><i style="padding-top:10px"> The functions have parameters a<sub>0</sub> , a<sub>1</sub> , a<sub>2</sub> etc, as shown. Initial guesses for the parameters should be listed one value per line, in that same order.</i>
                </div>
              </div>
                <div id="functionImage" style="float:right; padding:8px; margin:25px; width:40%; background-color: #639BF1;">
                  <img src="/rcr/static/linear.png" id="LinearImage">
            			<img src="/rcr/static/quadratic.png" id="QuadraticImage">
            			<img src="/rcr/static/cubic.png" id="CubicImage">
                  <img src="/rcr/static/powerlaw.png" id="PowerLawImage">
                  <img src="/rcr/static/exponential.png" id="ExponentialImage">
                  <img src="/rcr/static/logarithmic.png" id="LogarithmicImage">
                </div>
              -->



              <!-- WIP user-chosen xbar / lnx_bar
              <div style="float: right; padding-top:10px;">
              <h2> Enter data for <span style="text-decoration: overline">x</span> or <span style="text-decoration: overline">ln x</span></h2>
              <form>
                Enter value for x&#772;: <br>
                <input type="text" id="xBar" name="xBar"><br>
              </form>
              <br>
              <i style="padding-top:10px"><span style="text-decoration: overline">x</span> is needed for all function types except for the power law, and is usually defined as the (weighted) <br> average of the raw x data, but can be defined differently if desired.</i>
              <br>
              <br>
              <form>
                Enter value for <span style="text-decoration: overline">ln x</span>: (optional):<br>
                <input type="text" id="lnx_Bar" name="lnx_Bar"><br>
              </form>
              <br>
              <i style="padding-top:10px"><span style="text-decoration: overline">ln x</span> is only necessary for the power law case, and is usually defined as the (weighted) average of <br> the natural logarithms of the raw x data, but can be defined differently if desired. <br> For more info, please see page 45 of the RCR paper <a href="/rcr/calculator/downloads">here</a>.</i>
              <br>
              </div>
              -->


      <h1 style="font-size:2.5em;">Plot Data and Select the Basis of the Dependent Variable</h1>
      <div id="StepOne">
        <div id="Plot_input" style="padding:25px">
          <div class="bk-root" id="b980c559-b0df-4c52-a90f-b35d6b30686a" data-root-id="1059"></div>

          <script type="application/json" id="1132">
            {"31046ca0-56d0-4159-8268-2554a5ebd423":{"roots":{"references":[{"attributes":{"button_type":"primary","callback":null,"icon":null,"js_property_callbacks":{"change:clicks":[{"id":"1046","type":"CustomJS"}]},"label":"Logarithmic x Basis","sizing_mode":"stretch_both"},"id":"1050","type":"Button"},{"attributes":{},"id":"1022","type":"WheelZoomTool"},{"attributes":{"data_source":{"id":"1001","type":"ColumnDataSource"},"glyph":{"id":"1037","type":"Circle"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1038","type":"Circle"},"selection_glyph":null,"view":{"id":"1040","type":"CDSView"}},"id":"1039","type":"GlyphRenderer"},{"attributes":{"axis_label":"x","formatter":{"id":"1062","type":"BasicTickFormatter"},"plot":{"id":"1002","subtype":"Figure","type":"Plot"},"ticker":{"id":"1012","type":"BasicTicker"}},"id":"1011","type":"LinearAxis"},{"attributes":{"button_type":"primary","callback":null,"icon":null,"js_property_callbacks":{"change:clicks":[{"id":"1044","type":"CustomJS"}]},"label":"Exponential x Basis","sizing_mode":"stretch_both"},"id":"1051","type":"Button"},{"attributes":{"overlay":{"id":"1029","type":"BoxAnnotation"}},"id":"1023","type":"BoxZoomTool"},{"attributes":{"button_type":"primary","callback":null,"icon":null,"js_property_callbacks":{"change:clicks":[{"id":"1043","type":"CustomJS"}]},"label":"Linear y Basis","sizing_mode":"stretch_both"},"id":"1052","type":"Button"},{"attributes":{},"id":"1024","type":"SaveTool"},{"attributes":{},"id":"1012","type":"BasicTicker"},{"attributes":{"button_type":"primary","callback":null,"icon":null,"js_property_callbacks":{"change:clicks":[{"id":"1047","type":"CustomJS"}]},"label":"Logarithmic y Basis","sizing_mode":"stretch_both"},"id":"1053","type":"Button"},{"attributes":{},"id":"1025","type":"ResetTool"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"size":{"units":"screen","value":5},"x":{"field":"x"},"y":{"field":"y"}},"id":"1038","type":"Circle"},{"attributes":{"button_type":"primary","callback":null,"icon":null,"js_property_callbacks":{"change:clicks":[{"id":"1045","type":"CustomJS"}]},"label":"Exponential y Basis","sizing_mode":"stretch_both"},"id":"1054","type":"Button"},{"attributes":{"plot":{"id":"1002","subtype":"Figure","type":"Plot"},"ticker":{"id":"1012","type":"BasicTicker"}},"id":"1015","type":"Grid"},{"attributes":{},"id":"1026","type":"HelpTool"},{"attributes":{"below":[{"id":"1011","type":"LinearAxis"}],"left":[{"id":"1016","type":"LinearAxis"}],"plot_height":400,"renderers":[{"id":"1011","type":"LinearAxis"},{"id":"1015","type":"Grid"},{"id":"1016","type":"LinearAxis"},{"id":"1020","type":"Grid"},{"id":"1029","type":"BoxAnnotation"},{"id":"1039","type":"GlyphRenderer"}],"title":{"id":"1061","type":"Title"},"toolbar":{"id":"1027","type":"Toolbar"},"x_range":{"id":"1003","type":"DataRange1d"},"x_scale":{"id":"1007","type":"LinearScale"},"y_range":{"id":"1005","type":"DataRange1d"},"y_scale":{"id":"1009","type":"LinearScale"}},"id":"1002","subtype":"Figure","type":"Plot"},{"attributes":{"callback":null},"id":"1003","type":"DataRange1d"},{"attributes":{"children":[{"id":"1048","type":"Button"}],"sizing_mode":"scale_width"},"id":"1055","type":"WidgetBox"},{"attributes":{"axis_label":"y(x)","formatter":{"id":"1064","type":"BasicTickFormatter"},"plot":{"id":"1002","subtype":"Figure","type":"Plot"},"ticker":{"id":"1017","type":"BasicTicker"}},"id":"1016","type":"LinearAxis"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto","tools":[{"id":"1021","type":"PanTool"},{"id":"1022","type":"WheelZoomTool"},{"id":"1023","type":"BoxZoomTool"},{"id":"1024","type":"SaveTool"},{"id":"1025","type":"ResetTool"},{"id":"1026","type":"HelpTool"}]},"id":"1027","type":"Toolbar"},{"attributes":{"children":[{"id":"1049","type":"Button"},{"id":"1050","type":"Button"},{"id":"1051","type":"Button"}],"sizing_mode":"scale_width"},"id":"1056","type":"WidgetBox"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"plot":null,"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"1029","type":"BoxAnnotation"},{"attributes":{},"id":"1017","type":"BasicTicker"},{"attributes":{"children":[{"id":"1052","type":"Button"},{"id":"1053","type":"Button"},{"id":"1054","type":"Button"}],"sizing_mode":"scale_width"},"id":"1057","type":"WidgetBox"},{"attributes":{"dimension":1,"plot":{"id":"1002","subtype":"Figure","type":"Plot"},"ticker":{"id":"1017","type":"BasicTicker"}},"id":"1020","type":"Grid"},{"attributes":{"callback":null},"id":"1005","type":"DataRange1d"},{"attributes":{"callback":null,"data":{"x":[],"y":[]},"selected":{"id":"1066","type":"Selection"},"selection_policy":{"id":"1067","type":"UnionRenderers"}},"id":"1001","type":"ColumnDataSource"},{"attributes":{"children":[{"id":"1055","type":"WidgetBox"},{"id":"1056","type":"WidgetBox"},{"id":"1057","type":"WidgetBox"}],"sizing_mode":"fixed"},"id":"1058","type":"Column"},{"attributes":{"children":[{"id":"1002","subtype":"Figure","type":"Plot"},{"id":"1058","type":"Column"}]},"id":"1059","type":"Row"},{"attributes":{"args":{"p":{"id":"1002","subtype":"Figure","type":"Plot"},"src":{"id":"1001","type":"ColumnDataSource"}},"code":"\n    testCallBegin();\n\n    testLog('Plotting Input');\n\n    p.reset.emit();\n\n    var input_data = getData();\n    var x_data = input_data[0];\n    var y_data = input_data[1];\n\n    var data = src.data;\n\n    var x = data['x'];\n    var y = data['y'];\n\n    if (x_data.length != y_data.length){\n        testLog('Alert: inputted data must be same size');\n    }\n\n    for (var i = 0; i &lt; y_data.length; i++){\n        x[i] = x_data[i];\n        y[i] = y_data[i];\n    }\n\n    src.change.emit();\n\n    testCallEnd();\n"},"id":"1041","type":"CustomJS"},{"attributes":{},"id":"1007","type":"LinearScale"},{"attributes":{"args":{"p":{"id":"1002","subtype":"Figure","type":"Plot"},"src":{"id":"1001","type":"ColumnDataSource"}},"code":"\n    testCallBegin();\n\n    testLog('x -&gt; linear');\n\n    p.reset.emit();\n\n    var input_data = getData();\n    var oldx_data = input_data[0];\n    var oldy_data = input_data[1];\n\n    var trans_result = transformXLinear(oldx_data, oldy_data);\n\n    var x_data = trans_result[0];\n    var y_data = trans_result[1];\n\n    var data = src.data;\n\n    var x = data['x'];\n    var y = data['y'];\n\n    if (x_data.length != y_data.length){\n        testLog('Alert: inputted data must be same size');\n    }\n\n    for (var i = 0; i &lt; y_data.length; i++){\n        x[i] = x_data[i];\n        y[i] = y_data[i];\n    }\n\n    src.change.emit();\n\n    testCallEnd();\n"},"id":"1042","type":"CustomJS"},{"attributes":{"args":{"p":{"id":"1002","subtype":"Figure","type":"Plot"},"src":{"id":"1001","type":"ColumnDataSource"}},"code":"\n    testCallBegin();\n\n    testLog('y -&gt; linear');\n\n    p.reset.emit();\n\n    var input_data = getData();\n    var oldx_data = input_data[0];\n    var oldy_data = input_data[1];\n\n    var trans_result = transformYLinear(oldx_data, oldy_data);\n\n    var x_data = trans_result[0];\n    var y_data = trans_result[1];\n\n    var data = src.data;\n\n    var x = data['x'];\n    var y = data['y'];\n\n    if (x_data.length != y_data.length){\n        testLog('Alert: inputted data must be same size');\n    }\n\n    for (var i = 0; i &lt; y_data.length; i++){\n        x[i] = x_data[i];\n        y[i] = y_data[i];\n    }\n\n    src.change.emit();\n\n    testCallEnd();\n"},"id":"1043","type":"CustomJS"},{"attributes":{"args":{"p":{"id":"1002","subtype":"Figure","type":"Plot"},"src":{"id":"1001","type":"ColumnDataSource"}},"code":"\n    testCallBegin();\n\n    testLog('x -&gt; exponential');\n\n    p.reset.emit();\n\n    var input_data = getData();\n    var oldx_data = input_data[0];\n    var oldy_data = input_data[1];\n\n    var trans_result = transformXExp(oldx_data, oldy_data);\n\n    var x_data = trans_result[0];\n    var y_data = trans_result[1];\n\n    var data = src.data;\n\n    var x = data['x'];\n    var y = data['y'];\n\n    if (x_data.length != y_data.length){\n        testLog('Alert: inputted data must be same size');\n    }\n\n    for (var i = 0; i &lt; y_data.length; i++){\n        x[i] = x_data[i];\n        y[i] = y_data[i];\n    }\n\n    src.change.emit();\n\n    testCallEnd();\n"},"id":"1044","type":"CustomJS"},{"attributes":{},"id":"1064","type":"BasicTickFormatter"},{"attributes":{"plot":null,"text":""},"id":"1061","type":"Title"},{"attributes":{"args":{"p":{"id":"1002","subtype":"Figure","type":"Plot"},"src":{"id":"1001","type":"ColumnDataSource"}},"code":"\n    testCallBegin();\n\n    testLog('y -&gt; exponential');\n\n    p.reset.emit();\n\n    var input_data = getData();\n    var oldx_data = input_data[0];\n    var oldy_data = input_data[1];\n\n    var trans_result = transformYExp(oldx_data, oldy_data);\n\n    var x_data = trans_result[0];\n    var y_data = trans_result[1];\n\n    var data = src.data;\n\n    var x = data['x'];\n    var y = data['y'];\n\n    if (x_data.length != y_data.length){\n        testLog('Alert: inputted data must be same size');\n    }\n\n    for (var i = 0; i &lt; y_data.length; i++){\n        x[i] = x_data[i];\n        y[i] = y_data[i];\n    }\n\n    src.change.emit();\n\n    testCallEnd();\n"},"id":"1045","type":"CustomJS"},{"attributes":{},"id":"1062","type":"BasicTickFormatter"},{"attributes":{},"id":"1009","type":"LinearScale"},{"attributes":{"args":{"p":{"id":"1002","subtype":"Figure","type":"Plot"},"src":{"id":"1001","type":"ColumnDataSource"}},"code":"\n    testCallBegin();\n\n    testLog('x -&gt; logarithmic');\n\n    p.reset.emit();\n\n    var input_data = getData();\n    var oldx_data = input_data[0];\n    var oldy_data = input_data[1];\n\n    var trans_result = transformXLog(oldx_data, oldy_data);\n\n    var x_data = trans_result[0];\n    var y_data = trans_result[1];\n\n    var data = src.data;\n\n    var x = data['x'];\n    var y = data['y'];\n\n    if (x_data.length != y_data.length){\n        testLog('Alert: inputted data must be same size');\n    }\n\n    for (var i = 0; i &lt; y_data.length; i++){\n        x[i] = x_data[i];\n        y[i] = y_data[i];\n    }\n\n    src.change.emit();\n\n    testCallEnd();\n"},"id":"1046","type":"CustomJS"},{"attributes":{},"id":"1066","type":"Selection"},{"attributes":{"source":{"id":"1001","type":"ColumnDataSource"}},"id":"1040","type":"CDSView"},{"attributes":{"args":{"p":{"id":"1002","subtype":"Figure","type":"Plot"},"src":{"id":"1001","type":"ColumnDataSource"}},"code":"\n    testCallBegin();\n\n    testLog('y -&gt; logarithmic');\n\n    p.reset.emit();\n\n    var input_data = getData();\n    var oldx_data = input_data[0];\n    var oldy_data = input_data[1];\n\n    var trans_result = transformYLog(oldx_data, oldy_data);\n\n    var x_data = trans_result[0];\n    var y_data = trans_result[1];\n\n    var data = src.data;\n\n    var x = data['x'];\n    var y = data['y'];\n\n    if (x_data.length != y_data.length){\n        testLog('Alert: inputted data must be same size');\n    }\n\n    for (var i = 0; i &lt; y_data.length; i++){\n        x[i] = x_data[i];\n        y[i] = y_data[i];\n    }\n\n    src.change.emit();\n\n    testCallEnd();\n"},"id":"1047","type":"CustomJS"},{"attributes":{},"id":"1067","type":"UnionRenderers"},{"attributes":{"button_type":"primary","callback":null,"icon":null,"js_property_callbacks":{"change:clicks":[{"id":"1041","type":"CustomJS"}]},"label":"Plot Data","sizing_mode":"stretch_both"},"id":"1048","type":"Button"},{"attributes":{},"id":"1021","type":"PanTool"},{"attributes":{"button_type":"primary","callback":null,"icon":null,"js_property_callbacks":{"change:clicks":[{"id":"1042","type":"CustomJS"}]},"label":"Linear x Basis","sizing_mode":"stretch_both"},"id":"1049","type":"Button"},{"attributes":{"fill_alpha":{"value":0.5},"fill_color":{"value":"navy"},"line_alpha":{"value":0.5},"line_color":{"value":"navy"},"size":{"units":"screen","value":5},"x":{"field":"x"},"y":{"field":"y"}},"id":"1037","type":"Circle"}],"root_ids":["1059"]},"title":"Bokeh Application","version":"1.0.4"}}
          </script>
          <script type="text/javascript">
            (function() {
              var fn = function() {
                Bokeh.safely(function() {
                  (function(root) {
                    function embed_document(root) {

                    var docs_json = document.getElementById('1132').textContent;
                    var render_items = [{"docid":"31046ca0-56d0-4159-8268-2554a5ebd423","roots":{"1059":"b980c559-b0df-4c52-a90f-b35d6b30686a"}}];
                    root.Bokeh.embed.embed_items(docs_json, render_items);

                    }
                    if (root.Bokeh !== undefined) {
                      embed_document(root);
                    } else {
                      var attempts = 0;
                      var timer = setInterval(function(root) {
                        if (root.Bokeh !== undefined) {
                          embed_document(root);
                          clearInterval(timer);
                        }
                        attempts++;
                        if (attempts > 100) {
                          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                          clearInterval(timer);
                        }
                      }, 10, root)
                    }
                  })(window);
                });
              };
              if (document.readyState != "loading") fn();
              else document.addEventListener("DOMContentLoaded", fn);
            })();
          </script>
        </div>
      </div>

      <h1 style="font-size:2.5em;">Model Data</h1>
      <div id="StepOne">
        <div  id="ButtonSection">
          <h2> Select Model Function Type: </h2>
          <div style="display: inline; float:left">
            <i style="padding-top:10px">For large datasets and/or for non-listed custom functions, <br>it is recommended to just download the C++ source code (documentation included) <a href="/rcr/calculator/downloads">here</a>.</i>
            <br>
            <br>
            <div class="dropdown">
              <button class="dropbtn">(Select Function Here)</button>
              <div class="dropdown-content">
                <button id="Linear" class="Button DataType">Linear</button>
                <br>
                <button id="Quadratic" class="Button DataType">Quadratic</button>
                <br>
                <button id="Cubic" class="Button DataType">Cubic</button>
                <br>
                <button id="PowerLaw" class="Button DataType">Power Law</button>
                <br>
                <button id="Exponential" class="Button DataType">Exponential</button>
                <br>
                <button id="Logarithmic" class="Button DataType">Logarithmic</button>
              </div>
            </div>
          </div>

        </div>
          <div id="functionImage" style="float:right; padding:8px; margin:25px; width:40%; background-color: #639BF1;">
            <img src="/rcr/static/linear.png" id="LinearImage">
            <img src="/rcr/static/quadratic.png" id="QuadraticImage">
            <img src="/rcr/static/cubic.png" id="CubicImage">
            <img src="/rcr/static/powerlaw.png" id="PowerLawImage">
            <img src="/rcr/static/exponential.png" id="ExponentialImage">
            <img src="/rcr/static/logarithmic.png" id="LogarithmicImage">
          </div>

        <h2>Input Initial Guess for Function Parameters</h2>
        <div>
        <!--
        <div id="RejectionMethod" style="padding-top:25px;  position:relative;">
            <textarea class="dataTable" id="guessarea" style="height:300px"></textarea>
        </div>
      -->
        </div>

        <h2>Model Priors (Optional)</h2>
        <div>

        </div>

      </div>
    <br>
<br>
<br>
			<h1 style="font-size:2.5em; padding-top:25px;"> Select Rejection Method </h1>
<!--////////////////////////////////////////////////////////////////////////////-->
<!-- DISTRIBUTION SELECTION -->
<!--////////////////////////////////////////////////////////////////////////////-->
			<div id="StepOne" style="overflow:auto">

                <div id="ButtonSection">

                    <h2> Select Uncontaminated Distribution about y(x):</h2>

                    <button id="Symmetric" class="Button Distribution"> Gaussian, Mildly Peaked, or Mildly Flat-Topped (Default) </button>
                    <button id="Asymmetric" class="Button Distribution"> Mildly Asymmetric (Less Powerful) </button>

                    <h2 id="SelectContaminantSectionTitle"> Select Contaminants:</h2>
		    <div id="SelectContaminantSection">
                    	<button id="Equal" class="Button Contaminants"> High and Low in Equal Proportions </button>
                    	<button id="OneSided" class="Button Contaminants"> All High or All Low </button>
                    	<button id="Between" class="Button Contaminants"> In Between (Default) </button>
                    </div>
		            </div>
                <div id="RejectionMethod">

                    <h2> Selected Uncontaminated Distribution about y(x): </h2>
			<br>
      <div style="width:80%">
        <img src="/rcr/static/rcr1.png" id="SymmetricImage">
  			<img src="/rcr/static/rcr2.png" id="AsymmetricImage">
      </div>
                    <h2> Selected Rejection Method: </h2>
                    <p id="Option11" class="RejectionMethods">
                         μ: Median (§2.1; Maples et al. 2018) <br>
                         σ : Broken-line technique (§2.2, §2.3) <br>
                        Rejection proportional to σ both below and above  μ (§3.1, §3.3.2)
                    </p>
                    <p id="Option12" class="RejectionMethods">
												μ : Half-sample mode (§2.1; Maples et al. 2018)  <br>
												σ<sub>-</sub> , σ<sub>+</sub> : 68.3%-Value technique (§2.2, §2.3)<br>
                        Rejection proportional to min{σ<sub>-</sub> , σ<sub>+</sub>} both below and above μ (§3.2, §3.3.2)
                    </p>
                    <p id="Option13" class="RejectionMethods">
												μ: Half-sample mode (§2.1; Maples et al. 2018)  <br>
                        σ<sub>-</sub> , σ<sub>+</sub> : Broken-line technique (§2.2, §2.3)<br>
                        Rejection proportional to min{σ<sub>-</sub> , σ<sub>+</sub>} both below and above μ (§3.2, §3.3.2)
                    </p>
                    <p id="Option2All" class="RejectionMethods">
												μ: Half-sample mode (§2.1; Maples et al. 2018)  <br>
                        σ<sub>-</sub> , σ<sub>+</sub> : Broken-line technique (§2.2, §2.3)<br>
                        Rejection proportional to σ<sub>-</sub> below μ and σ<sub>+</sub> above μ (§3.3.1)
                    </p>
                    <p id="Option3" class="RejectionMethods">
			Fundamentally, RCR assumes that the uncontaminated distribution is Gaussian, or near Gaussian.  In particular, our <q>All High or All Low</q> and <q>In Between</q> contaminant type options are especially sensitive to this assumption, and should not be used if this assumption is not met.                    </p>
                    <p id="OptionAll" class="RejectionMethods">
                        Note: Rejection method is iterative, preceded by iterative bulk rejection (§5), and proceeded by both (1) iterative "median + 68.3%-value technique" rejection, and (2) iterative "mean + standard deviation " rejection (§4).
                    </p>

                </div>
            </div>

<!--////////////////////////////////////////////////////////////////////////////-->
<!-- DATA OUTPUT SECTION -->
<!--////////////////////////////////////////////////////////////////////////////-->

            <h1 style="font-size:2.5em; padding-top:25px;"> Output </h1>
              <div id="StepOne">
                <div  id="ButtonSection">
                <br>
                    <div  style="float:left; width:400px">
                        <button id="PerformRCR" class="Button RejectButton"  onclick="performFunctionalRCR();">Perform RCR!</button>
                    </div>
                    <br>
                    <div id="OutputTableWrapper" style="display: none; display: inline; float:left; width:450px">
                      <div id="RejectionMethod" style="float:left; width:400px">
                        <div id="ButtonSection" style="width:100%; padding:5px 0px 5px 0px;">
                        <br>
                            <table style="width:100%;">
                            <tr>
                                <td  style="width:33%;">
                                    <button id="showNonRejected" class="Button DataType"> Show Unrejected Points </button>
                                </td>
                                <td  style="width:33%;">
                                    <button id="showRejected" class="Button DataType"> Show Rejected Points </button>
                                </td>
                                <td  style="width:33%;">
                                    <button id="showAll" class="Button DataType"> Show Both With Flags </button>
                                </td>
                            </tr>
                            </table>
                        </div>

                        <div id="RejectionMethod" style="width:130%; float:right">
                          <table style="float:right">
                            <tr>
                              <th> Selected points: </th>
                              <th>Final function <br> parameters:</th>
                            </tr>
                            <tr>
                              <th>
                                <textarea class="dataTable" id="nonRejectedData" style="margin-top:15px; width:80%; height:200px"></textarea>
                                <textarea class="dataTable" id="rejectedData" style="margin-top:15px; width:80%; height:200px"></textarea>
                                <textarea class="dataTable" id="allData" style="margin-top:15px; width:120%; height:200px"></textarea>
                              </th>
                              <th><textarea class="dataTable" id="finalParameters" style="margin-top:15px; width:80%; height:200px"></textarea></th>
                            </tr>
                          </table>
                        </div>
    		            </div>
                    </div>
                </div>
                <!-- PLOT DIV -->
                <div id="Plot" style="float:right; padding-bottom:25px">
                  <div class="bk-root" id="9112dff6-2954-4ac8-ba70-55a9771bcf90" data-root-id="1087"></div>

                  <script type="application/json" id="1284">
                    {"5da963a5-8078-45ac-a721-e61f2b698c6b":{"roots":{"references":[{"attributes":{"callback":null,"data":{"x_rejected":[],"y_rejected":[]},"selected":{"id":"1082","type":"Selection"},"selection_policy":{"id":"1081","type":"UnionRenderers"}},"id":"1002","type":"ColumnDataSource"},{"attributes":{},"id":"1014","type":"BasicTicker"},{"attributes":{"data_source":{"id":"1001","type":"ColumnDataSource"},"glyph":{"id":"1039","type":"Circle"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1040","type":"Circle"},"selection_glyph":null,"view":{"id":"1042","type":"CDSView"}},"id":"1041","type":"GlyphRenderer"},{"attributes":{},"id":"1027","type":"ResetTool"},{"attributes":{"label":{"value":"nonrejected data of size"},"renderers":[{"id":"1041","type":"GlyphRenderer"}]},"id":"1051","type":"LegendItem"},{"attributes":{"line_color":"green","line_width":2,"x":{"field":"x_original"},"y":{"field":"y_fitted"}},"id":"1068","type":"Line"},{"attributes":{},"id":"1028","type":"HelpTool"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","line_width":2,"x":{"field":"x_original"},"y":{"field":"y_fitted"}},"id":"1069","type":"Line"},{"attributes":{"plot":{"id":"1004","subtype":"Figure","type":"Plot"},"ticker":{"id":"1014","type":"BasicTicker"}},"id":"1017","type":"Grid"},{"attributes":{"data_source":{"id":"1003","type":"ColumnDataSource"},"glyph":{"id":"1068","type":"Line"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1069","type":"Line"},"selection_glyph":null,"view":{"id":"1071","type":"CDSView"}},"id":"1070","type":"GlyphRenderer"},{"attributes":{"callback":null,"data":{"x_nonrejected":[],"y_nonrejected":[]},"selected":{"id":"1065","type":"Selection"},"selection_policy":{"id":"1064","type":"UnionRenderers"}},"id":"1001","type":"ColumnDataSource"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto","tools":[{"id":"1023","type":"PanTool"},{"id":"1024","type":"WheelZoomTool"},{"id":"1025","type":"BoxZoomTool"},{"id":"1026","type":"SaveTool"},{"id":"1027","type":"ResetTool"},{"id":"1028","type":"HelpTool"}]},"id":"1029","type":"Toolbar"},{"attributes":{"axis_label":"y","formatter":{"id":"1047","type":"BasicTickFormatter"},"plot":{"id":"1004","subtype":"Figure","type":"Plot"},"ticker":{"id":"1019","type":"BasicTicker"}},"id":"1018","type":"LinearAxis"},{"attributes":{},"id":"1064","type":"UnionRenderers"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"plot":null,"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"1031","type":"BoxAnnotation"},{"attributes":{"source":{"id":"1003","type":"ColumnDataSource"}},"id":"1071","type":"CDSView"},{"attributes":{"callback":null},"id":"1005","type":"DataRange1d"},{"attributes":{},"id":"1081","type":"UnionRenderers"},{"attributes":{},"id":"1019","type":"BasicTicker"},{"attributes":{},"id":"1082","type":"Selection"},{"attributes":{"label":{"value":"fitted model"},"renderers":[{"id":"1070","type":"GlyphRenderer"}]},"id":"1083","type":"LegendItem"},{"attributes":{"plot":null,"text":""},"id":"1044","type":"Title"},{"attributes":{"below":[{"id":"1013","type":"LinearAxis"}],"left":[{"id":"1018","type":"LinearAxis"}],"renderers":[{"id":"1013","type":"LinearAxis"},{"id":"1017","type":"Grid"},{"id":"1018","type":"LinearAxis"},{"id":"1022","type":"Grid"},{"id":"1031","type":"BoxAnnotation"},{"id":"1050","type":"Legend"},{"id":"1041","type":"GlyphRenderer"},{"id":"1055","type":"GlyphRenderer"},{"id":"1070","type":"GlyphRenderer"}],"title":{"id":"1044","type":"Title"},"toolbar":{"id":"1029","type":"Toolbar"},"x_range":{"id":"1005","type":"DataRange1d"},"x_scale":{"id":"1009","type":"LinearScale"},"y_range":{"id":"1007","type":"DataRange1d"},"y_scale":{"id":"1011","type":"LinearScale"}},"id":"1004","subtype":"Figure","type":"Plot"},{"attributes":{"callback":null,"data":{"x_original":[],"y_fitted":[]},"selected":{"id":"1100","type":"Selection"},"selection_policy":{"id":"1099","type":"UnionRenderers"}},"id":"1003","type":"ColumnDataSource"},{"attributes":{"args":{"sourceall":{"id":"1003","type":"ColumnDataSource"},"sourcenon":{"id":"1001","type":"ColumnDataSource"},"sourcerej":{"id":"1002","type":"ColumnDataSource"}},"code":"\n    console.log('Plot Generating...');\n    var datanon = sourcenon.data;\n    var datarej = sourcerej.data;\n    var dataall = sourceall.data;\n\n    var x_rejected = datarej['x_rejected']\n    var y_rejected = datarej['y_rejected']\n    var x_nonrejected = datanon['x_nonrejected']\n    var y_nonrejected = datanon['y_nonrejected']\n    var x_original = dataall['x_original']\n    var y_fitted = dataall['y_fitted']\n\n    for (var i = 0; i &lt; x_rejected_result.length; i++) {\n        x_rejected[i] = x_rejected_result[i]\n        y_rejected[i] = y_rejected_result[i]\n    }\n    for (var i = 0; i &lt; x_nonrejected_result.length; i++) {\n        x_nonrejected[i] = x_nonrejected_result[i]\n        y_nonrejected[i] = y_nonrejected_result[i]\n    }\n    for (var i = 0; i &lt; x_original_result.length; i++) {\n        x_original[i] = x_original_result[i]\n        y_fitted[i] = y_fitted_result[i]\n    }\n\n    console.log(datarej['x_rejected']);\n    console.log(datarej['y_rejected']);\n    console.log(datanon['x_nonrejected']);\n    console.log(datanon['y_nonrejected']);\n    console.log(dataall['x_original']);\n    console.log(dataall['y_fitted']);\n\n    sourcenon.change.emit();\n    sourcerej.change.emit();\n    sourceall.change.emit();\n"},"id":"1084","type":"CustomJS"},{"attributes":{},"id":"1045","type":"BasicTickFormatter"},{"attributes":{"button_type":"primary","callback":null,"icon":null,"js_property_callbacks":{"change:clicks":[{"id":"1084","type":"CustomJS"}]},"label":"Plot Results"},"id":"1085","type":"Button"},{"attributes":{},"id":"1047","type":"BasicTickFormatter"},{"attributes":{"callback":null},"id":"1007","type":"DataRange1d"},{"attributes":{"children":[{"id":"1086","type":"WidgetBox"},{"id":"1004","subtype":"Figure","type":"Plot"}]},"id":"1087","type":"Column"},{"attributes":{"dimension":1,"plot":{"id":"1004","subtype":"Figure","type":"Plot"},"ticker":{"id":"1019","type":"BasicTicker"}},"id":"1022","type":"Grid"},{"attributes":{"items":[{"id":"1051","type":"LegendItem"},{"id":"1066","type":"LegendItem"},{"id":"1083","type":"LegendItem"}],"plot":{"id":"1004","subtype":"Figure","type":"Plot"}},"id":"1050","type":"Legend"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"size":{"units":"screen","value":5},"x":{"field":"x_nonrejected"},"y":{"field":"y_nonrejected"}},"id":"1040","type":"Circle"},{"attributes":{"children":[{"id":"1085","type":"Button"}]},"id":"1086","type":"WidgetBox"},{"attributes":{},"id":"1023","type":"PanTool"},{"attributes":{"source":{"id":"1001","type":"ColumnDataSource"}},"id":"1042","type":"CDSView"},{"attributes":{},"id":"1024","type":"WheelZoomTool"},{"attributes":{"label":{"value":"rejected data"},"renderers":[{"id":"1055","type":"GlyphRenderer"}]},"id":"1066","type":"LegendItem"},{"attributes":{"fill_alpha":{"value":0.5},"fill_color":{"value":"navy"},"line_alpha":{"value":0.5},"line_color":{"value":"navy"},"size":{"units":"screen","value":5},"x":{"field":"x_nonrejected"},"y":{"field":"y_nonrejected"}},"id":"1039","type":"Circle"},{"attributes":{"fill_alpha":{"value":0.5},"fill_color":{"value":"red"},"line_alpha":{"value":0.5},"line_color":{"value":"red"},"size":{"units":"screen","value":5},"x":{"field":"x_rejected"},"y":{"field":"y_rejected"}},"id":"1053","type":"Circle"},{"attributes":{"overlay":{"id":"1031","type":"BoxAnnotation"}},"id":"1025","type":"BoxZoomTool"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"size":{"units":"screen","value":5},"x":{"field":"x_rejected"},"y":{"field":"y_rejected"}},"id":"1054","type":"Circle"},{"attributes":{},"id":"1009","type":"LinearScale"},{"attributes":{},"id":"1099","type":"UnionRenderers"},{"attributes":{"data_source":{"id":"1002","type":"ColumnDataSource"},"glyph":{"id":"1053","type":"Circle"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1054","type":"Circle"},"selection_glyph":null,"view":{"id":"1056","type":"CDSView"}},"id":"1055","type":"GlyphRenderer"},{"attributes":{},"id":"1011","type":"LinearScale"},{"attributes":{},"id":"1100","type":"Selection"},{"attributes":{"source":{"id":"1002","type":"ColumnDataSource"}},"id":"1056","type":"CDSView"},{"attributes":{"axis_label":"x","formatter":{"id":"1045","type":"BasicTickFormatter"},"plot":{"id":"1004","subtype":"Figure","type":"Plot"},"ticker":{"id":"1014","type":"BasicTicker"}},"id":"1013","type":"LinearAxis"},{"attributes":{},"id":"1065","type":"Selection"},{"attributes":{},"id":"1026","type":"SaveTool"}],"root_ids":["1087"]},"title":"Bokeh Application","version":"1.0.4"}}
                  </script>
                  <script type="text/javascript">
                    (function() {
                      var fn = function() {
                        Bokeh.safely(function() {
                          (function(root) {
                            function embed_document(root) {

                            var docs_json = document.getElementById('1284').textContent;
                            var render_items = [{"docid":"5da963a5-8078-45ac-a721-e61f2b698c6b","roots":{"1087":"9112dff6-2954-4ac8-ba70-55a9771bcf90"}}];
                            root.Bokeh.embed.embed_items(docs_json, render_items);

                            }
                            if (root.Bokeh !== undefined) {
                              embed_document(root);
                            } else {
                              var attempts = 0;
                              var timer = setInterval(function(root) {
                                if (root.Bokeh !== undefined) {
                                  embed_document(root);
                                  clearInterval(timer);
                                }
                                attempts++;
                                if (attempts > 100) {
                                  console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                                  clearInterval(timer);
                                }
                              }, 10, root)
                            }
                          })(window);
                        });
                      };
                      if (document.readyState != "loading") fn();
                      else document.addEventListener("DOMContentLoaded", fn);
                    })();
                  </script>
                </div>
              </div>

            </div>

          <br>

  </body>
</html>
<script>

var chosenFunctionType;

//Initializing the final result lists that will come from RCR and will result in plotting:
var x_rejected_result = [];
var y_rejected_result = [];
var x_nonrejected_result = [];
var y_nonrejected_result = [];
var x_original_result = [];
var y_fitted_result = [];

var x_basis = 'linear';
var y_basis = 'linear';

function test(){
  console.log('Testing performFunctionalRCR button')
  return;
}

function testCallBegin(){
	console.log('Callback begins');
	return;
}

function testCallEnd(){
	console.log('Callback ends');
	return;
}

function testLog(thing){
	console.log(thing);
	return;
}

function transformXLinear(x_data, y_data){ //takes in RAW DATA for x and y, always
	var trans_x = []; //if one axis is transformed to log, negative points will be rejected; the corresponded points in the other dimension must also be removed.
  var new_y = [];

	for (var i = 0; i < x_data.length; i++){
		if (x_data[i] > 0){
			trans_x.push(x_data[i]);
      switch (y_basis){
        case 'linear': //whichever basis the non-transformed axis is in needs to be maintained
          new_y.push(y_data[i]);
          break;
        case 'log':
          if (y_data[i] <= 0){ //if the other variable is in log space, and is below zero, it shouldnt be plotted, so the corresponding var is removed
            trans_x.pop();
          } else {
            new_y.push(Math.log10(y_data[i]));
          }
        case 'exp':
          new_y.push(Math.pow(10,y_data[i]));
          break;
        default:
          break;
      }
		}
	}
  x_basis = 'log';
	return [trans_x, new_y];
}

function transformYLinear(x_data, y_data){ //takes in RAW DATA for x and y, always
	var trans_y = []; //if one axis is transformed to log, negative points will be rejected; the corresponded points in the other dimension must also be removed.
  var new_x = [];

	for (var i = 0; i < y_data.length; i++){
		if (y_data[i] > 0){
			trans_y.push(y_data[i]);
      switch (x_basis){
        case 'linear': //whichever basis the non-transformed axis is in needs to be maintained
          new_x.push(x_data[i]);
          break;
        case 'log':
          if (x_data[i] <= 0){ //if the other variable is in log space, and is below zero, it shouldnt be plotted, so the corresponding var is removed
            trans_y.pop();
          } else {
            new_x.push(Math.log10(x_data[i]));
          }
        case 'exp':
          new_x.push(Math.pow(10,x_data[i]));
          break;
        default:
          break;
      }
		}
	}
  y_basis = 'log';
	return [new_x, trans_y];
}

function transformXExp(x_data, y_data){ //takes in RAW DATA for x and y, always
	var trans_x = []; //if one axis is transformed to log, negative points will be rejected; the corresponded points in the other dimension must also be removed.
  var new_y = [];

	for (var i = 0; i < x_data.length; i++){
		if (x_data[i] > 0){
			trans_x.push(Math.pow(10,x_data[i]));
      switch (y_basis){
        case 'linear': //whichever basis the non-transformed axis is in needs to be maintained
          new_y.push(y_data[i]);
          break;
        case 'log':
          if (y_data[i] <= 0){ //if the other variable is in log space, and is below zero, it shouldnt be plotted, so the corresponding var is removed
            trans_x.pop();
          } else {
            new_y.push(Math.log10(y_data[i]));
          }
        case 'exp':
          new_y.push(Math.pow(10,y_data[i]));
          break;
        default:
          break;
      }
		}
	}
  x_basis = 'exp';
	return [trans_x, new_y];
}

function transformYExp(x_data, y_data){ //takes in RAW DATA for x and y, always
	var trans_y = []; //if one axis is transformed to log, negative points will be rejected; the corresponded points in the other dimension must also be removed.
  var new_x = [];

	for (var i = 0; i < y_data.length; i++){
		if (y_data[i] > 0){
			trans_y.push(Math.pow(10,y_data[i]));
      switch (x_basis){
        case 'linear': //whichever basis the non-transformed axis is in needs to be maintained
          new_x.push(x_data[i]);
          break;
        case 'log':
          if (x_data[i] <= 0){ //if the other variable is in log space, and is below zero, it shouldnt be plotted, so the corresponding var is removed
            trans_y.pop();
          } else {
            new_x.push(Math.log10(x_data[i]));
          }
        case 'exp':
          new_x.push(Math.pow(10,x_data[i]));
          break;
        default:
          break;
      }
		}
	}
  y_basis = 'exp';
	return [new_x, trans_y];
}

function transformXLog(x_data, y_data){ //takes in RAW DATA for x and y, always
	var trans_x = []; //if one axis is transformed to log, negative points will be rejected; the corresponded points in the other dimension must also be removed.
  var new_y = [];

	for (var i = 0; i < x_data.length; i++){
		if (x_data[i] > 0){
			trans_x.push(Math.log10(x_data[i]));
      switch (y_basis){
        case 'linear': //whichever basis the non-transformed axis is in needs to be maintained
          new_y.push(y_data[i]);
          break;
        case 'log':
          if (y_data[i] <= 0){ //if the other variable is in log space, and is below zero, it shouldnt be plotted, so the corresponding var is removed
            trans_x.pop();
          } else {
            new_y.push(Math.log10(y_data[i]));
          }
        case 'exp':
          new_y.push(Math.pow(10,y_data[i]));
          break;
        default:
          break;
      }
		}
	}
  x_basis = 'log';
	return [trans_x, new_y];
}

function transformYLog(x_data, y_data){ //takes in RAW DATA for x and y, always
	var trans_y = []; //if one axis is transformed to log, negative points will be rejected; the corresponded points in the other dimension must also be removed.
  var new_x = [];

	for (var i = 0; i < y_data.length; i++){
		if (y_data[i] > 0){
			trans_y.push(Math.log10(y_data[i]));
      switch (x_basis){
        case 'linear': //whichever basis the non-transformed axis is in needs to be maintained
          new_x.push(x_data[i]);
          break;
        case 'log':
          if (x_data[i] <= 0){ //if the other variable is in log space, and is below zero, it shouldnt be plotted, so the corresponding var is removed
            trans_y.pop();
          } else {
            new_x.push(Math.log10(x_data[i]));
          }
        case 'exp':
          new_x.push(Math.pow(10,x_data[i]));
          break;
        default:
          break;
      }
		}
	}
  y_basis = 'log';
	return [new_x, trans_y];
}

function getData(){
	var has_Weights = $('#Weighted').data('clicked');
	var has_ErrorBars = $('#ErrorBars').data('clicked');

  var x_data = [];
	var y_data = [];
	var w_data = [];

	var inputData = document.getElementById('inputTextAreaData').value;

	var inputData_Arr = inputData.split("\n");

	var N = inputData_Arr.length;

    //console.log(inputData_Arr);
	if (has_Weights || has_ErrorBars){
    for (var i = 0; i < N; i++){
    	datapoint = inputData_Arr[i].split("\t");
    	if (datapoint.length < 3){ //if not tab seperated, try space seperated
    		datapoint = inputData_Arr[i].split(" ");
    	}
        x_data.push(Number(datapoint[0]));
        y_data.push(Number(datapoint[1]));
				if (has_ErrorBars){
					//w_data.push(1.0 / Math.pow(Number(datapoint[1]),2.0))
					w_data.push(Number(datapoint[2])); //purpose of this function is to just get data, not modify it
				} else if (has_Weights){
					w_data.push(Number(datapoint[2]));
				}
		}
		return [x_data, y_data, w_data];
	} else {
    for (var i = 0; i < N; i++){
    	datapoint = inputData_Arr[i].split("\t");
    	if (datapoint.length < 2){ //if not tab seperated, try space seperated
    		datapoint = inputData_Arr[i].split(" ");
    	}
      x_data.push(Number(datapoint[0]));
      y_data.push(Number(datapoint[1]));
		}
		}
		return [x_data, y_data];
	}

function convertData(inputDataContents){ //convert from new format to old format
  var has_Weights = $('#Weighted').data('clicked');
	var has_ErrorBars = $('#ErrorBars').data('clicked');

  var x_data = [];
  var y_data = []; //these are lists of strings
	var w_data = [];

  mainDataContents = "";
  xDataContents = "";
  var inputData_Arr = inputDataContents.split("\n");
	var N = inputData_Arr.length;

  if (has_Weights || has_ErrorBars){ //creates lists of data (list of strings)
    for (var i = 0; i < N; i++){
    	datapoint = inputData_Arr[i].split("\t");
    	if (datapoint.length < 3){ //if not tab seperated, try space seperated
    		datapoint = inputData_Arr[i].split(" ");
    	}
        x_data.push(datapoint[0]);
        y_data.push(datapoint[1]);
				if (has_ErrorBars){
					//w_data.push(1.0 / Math.pow(Number(datapoint[1]),2.0))
          var new_w = 1/Math.pow(Number(datapoint[2]), 2);
					w_data.push(new_w.toString);
				} else if (has_Weights){
		        w_data.push(datapoint[2]);
				}
		}
	} else {
      for (var i = 0; i < N; i++){
      	datapoint = inputData_Arr[i].split("\t");
      	if (datapoint.length < 2){ //if not tab seperated, try space seperated
      		datapoint = inputData_Arr[i].split(" ");
      	}
          x_data.push(datapoint[0]);
          y_data.push(datapoint[1]);
  		}
		}

  for (var i = 0; i < N; i++){
    xDataContents += x_data[i] + "\n";
  }

  if (has_Weights || has_ErrorBars){ //adds data to old format strings
    for (var i = 0; i < N; i++){
    	mainDataContents += y_data[i] + " " + w_data[i] + "\n";
		}
	}
  else {
    for (var i = 0; i < N; i++){
    	mainDataContents += y_data[i] + "\n";
		}
	}

  console.log(xDataContents);
  console.log(mainDataContents);

  return [mainDataContents, xDataContents];
}

function testPerform(){
  x_rejected_result = [];
  y_rejected_result = [];
  x_nonrejected_result = [];
  y_nonrejected_result = [];
  x_original_result = [];
  y_fitted_result = [];

  mainDataContents = document.getElementById('ydataarea').value
  xDataContents = document.getElementById('xdataarea').value
  //console.log("xDataContents: " + xDataContents);
  guessDataContents = document.getElementById('guessarea').value

  $('#OutputTableWrapper').css('display', 'inline');
  $('#Plot').css('display', 'inline');

  hasSymmetricDist = $('#Symmetric').data('clicked');
  hasEqualCont = $('#Equal').data('clicked');
  hasOneSidedCont = $('#OneSided').data('clicked');
  hasInBetweenCont = $('#Between').data('clicked');
  hasWeights = $('#Weighted').data('clicked');

  /*
  if (chosenFunctionType === 'PowerLaw'){
    correct_barData = document.getElementById('lnx_Bar')
  } else {
    correct_barData = document.getElementById('xBar')
  }
  */

  console.log("hasSymmetricDist: " + hasSymmetricDist);
	console.log("hasEqualCont: " + hasEqualCont);
	console.log("hasOneSidedCont: " + hasOneSidedCont);
	console.log("hasInBetweenCont: " + hasInBetweenCont);
	console.log("hasWeights: " + hasWeights);
  console.log("chosenFunctionType: " + chosenFunctionType);
  //console.log(correct_barData);
  /*
  var test_finalParametersData = "1.0\n2.0";
  var test_nonRejectedData = "1.0\t-1.0\n2.0\t1.0";
  var test_RejectedData = "3.0\t8.0";
  var test_AllData = "1.0\t-1.0\n2.0\t1.0\n3.0\t8.0";

  document.getElementById('finalParameters').value = test_finalParametersData;
  document.getElementById('nonRejectedData').value = test_nonRejectedData;
  document.getElementById('rejectedData').value = test_RejectedData;
  document.getElementById('allData').value = test_AllData;
  */

  var test_finalParametersData = "-1.5\n1.0";
  var test_nonRejectedData = "1.0\t-6.0\n2.0\t-5.0\n3.0\t-4.0\n4.0\t-3.0\n5.0\t-2.0\n6.0\t-1.0\n8.0\t1.0\n9.0\t2.0\n10.0\t3.0";
  var test_RejectedData = "7.0\t25.0";
  var test_AllData = "1.0\t-6.0\n2.0\t-5.0\n3.0\t-4.0\n4.0\t-3.0\n5.0\t-2.0\n6.0\t-1.0\n7.0\t25.0\n8.0\t1.0\n9.0\t2.0\n10.0\t3.0";

  document.getElementById('finalParameters').value = test_finalParametersData;
  document.getElementById('nonRejectedData').value = test_nonRejectedData;
  document.getElementById('rejectedData').value = test_RejectedData;
  document.getElementById('allData').value = test_AllData;

  //this function will use a different parametric function, and corresponding c++ function based off of what parametric function was chosen

  //convert results to lists of strings (for plotting)
  var parameters_result = test_finalParametersData.split("\n");
  parameters_result = parameters_result.map(Number);

  var nonRejArr = test_nonRejectedData.split("\n");
  var rejArr = test_RejectedData.split("\n");

  //adds number data to nonrejected and rejected x and y arrays
  for (var i = 0; i < nonRejArr.length; i++) {
    var dataSet = nonRejArr[i].split("\t");
    x_nonrejected_result.push(Number(dataSet[0]));
    y_nonrejected_result.push(Number(dataSet[1]));
  }
  for (var i = 0; i < rejArr.length; i++) {
    var dataSet = rejArr[i].split("\t");
    x_rejected_result.push(Number(dataSet[0]));
    y_rejected_result.push(Number(dataSet[1]));

  }
  //for plotting the fitted function: (completes x_original_result)
  x_original_result = xDataContents.split("\n");
  //console.log(x_original_result);
  if (x_original_result[x_original_result.length - 1] ===""){
    x_original_result.pop();
  }
  x_original_result = x_original_result.map(Number);
  //console.log(x_original_result);

  //gets array of weights, as numbers in order:
  var weights_result = [];
  if (hasWeights){
    var mainDataContents_arr = mainDataContents.split("\n");

    for (var i = 0; i < x_original_result.length; i++){
      var dataSet = mainDataContents_arr[i].split("\t");
      weights_result.push(Number(dataSet[2]));
    }
  }


  //creates data for fitted model (y_fitted_result)
  switch (chosenFunctionType){
    case "Linear":
      var xBar = 0;
      if (hasWeights){
        xBar = getWeightedXBar(x_original_result, weights_result);
      } else {
        xBar = getXBar(x_original_result);
        //console.log(xBar);
      }
      var a0 = parameters_result[0];
      var a1 = parameters_result[1];
      //console.log(parameters_result);

      for (var i = 0; i < x_original_result.length; i++) {
        var y_point = ( a0 + a1*(x_original_result[i] - xBar) );
        y_fitted_result.push(y_point);
        //console.log(y_fitted_result);
      }
      break;
    case "Quadratic":

      var xBar = 0;
      if (hasWeights){
        xBar = getWeightedXBar(x_original_result, weights_result);
      } else {
        xBar = getXBar(x_original_result);
      }
      var a0 = parameters_result[0];
      var a1 = parameters_result[1];
      var a2 = parameters_result[2];

      for (var i = 0; i < x_original_result.length; i++) {
        var y_point = ( a0 + a1*(x_original_result[i] - xBar) + a2*Math.pow((x_original_result[i] - xBar), 2.0));
        y_fitted_result.push(y_point);
      }
      break;
    case "Cubic":
      var XBar = 0;
      if (hasWeights){
        XBar = getWeightedXBar(x_original_result, weights_result);
      } else {
        XBar = getXBar(x_original_result);
      }
      var a0 = parameters_result[0];
      var a1 = parameters_result[1];
      var a2 = parameters_result[2];
      var a3 = parameters_result[3];

      for (var i = 0; i < x_original_result.length; i++) {
        var y_point = ( a0 + a1*(x_original_result[i] - xBar) + a2*Math.pow((x_original_result[i] - xBar), 2.0) + a3*Math.pow((x_original_result[i] - xBar), 3.0));
        y_fitted_result.push(y_point);
      }
      break;
    case "PowerLaw":
      var lnXBar = 0;
      if (hasWeights){
        lnXBar = getWeightedLnXBar(x_original_result, weights_result);
      } else {
        lnXBar = getLnXBar(x_original_result);
      }

      var a0 = parameters_result[0];
      var a1 = parameters_result[1];

      for (var i = 0; i < x_original_result.length; i++) {
        var y_point = ( a0*Math.pow((x_original_result[i]/Math.exp(lnXBar)), a1) );
        y_fitted_result.push(y_point);
      }
      break;
    case "Exponential":
      var xBar = 0;
      if (hasWeights){
        xBar = getWeightedXBar(x_original_result, weights_result);
      } else {
        xBar = getXBar(x_original_result);
      }
      var a0 = parameters_result[0];
      var a1 = parameters_result[1];

      for (var i = 0; i < x_original_result.length; i++) {
        var y_point = ( a0 * Math.exp(a1*(x_original_result[i]-xBar)) );
        y_fitted_result.push(y_point);
      }
      break;
    case "Logarithmic":
      var xBar = 0;
      if (hasWeights){
        xBar = getWeightedXBar(x_original_result, weights_result);
      } else {
        xBar = getXBar(x_original_result);
      }
      var a0 = parameters_result[0];

      for (var i = 0; i < x_original_result.length; i++) {
        var y_point = ( a0 * Math.log(x_original_result[i] - xBar) );
        y_fitted_result.push(y_point);
      }
      break;
    default:
      console.log("Error: no model function selected");
  }
  console.log(x_rejected_result);
  console.log(y_rejected_result);
  console.log(x_nonrejected_result);
  console.log(y_nonrejected_result);
  console.log(x_original_result);
  console.log(y_fitted_result);
}

function functionSelector(functionName){
  chosenFunctionType = functionName;
  console.log('Function chosen: ' + chosenFunctionType)
}

function getXBar(xArr){
  var upperSum = 0;
  for (var i = 0; i < xArr.length; i++){
    upperSum += xArr[i];
  }
  return (upperSum / xArr.length);
}

function getWeightedXBar(xArr, wArr){
  var upperSum = 0;
  var lowerSum = 0;
  for (var i = 0; i < xArr.length; i++){
    upperSum += (xArr[i]*wArr[i]);
    lowerSum += wArr[i];
  }
  return (upperSum / lowerSum);
}

function getLnXBar(xArr){
  var upperSum = 0;
  for (var i = 0; i < xArr.length; i++){
    upperSum += Math.log(xArr[i]);
  }
  return (upperSum / xArr.length);
}

function getWeightedLnXBar(xArr, wArr){
  var upperSum = 0;
  var lowerSum = 0;
  for (var i = 0; i < xArr.length; i++){
    upperSum += (Math.log(xArr[i])*wArr[i]);
    lowerSum += wArr[i];
  }
  return (upperSum / lowerSum);
}

function performFunctionalRCR(){
  x_rejected_result = [];
  y_rejected_result = [];
  x_nonrejected_result = [];
  y_nonrejected_result = [];
  x_original_result = [];
  y_fitted_result = [];

  var inputDataContents = document.getElementById('inputTextAreaData').value;

  var convertedData = convertData(inputDataContents); //also converts error bars to weights

  mainDataContents = convertedData[0];
  xDataContents = convertedData[1];

  //mainDataContents = document.getElementById('ydataarea').value
  //xDataContents = document.getElementById('xdataarea').value
  guessDataContents = document.getElementById('guessarea').value

  $('#OutputTableWrapper').css('display', 'inline');
  $('#Plot').css('display', 'inline');

  hasSymmetricDist = $('#Symmetric').data('clicked');
  hasEqualCont = $('#Equal').data('clicked');
  hasOneSidedCont = $('#OneSided').data('clicked');
  hasInBetweenCont = $('#Between').data('clicked');
  hasWeights = $('#Weighted').data('clicked');

  /*
  if (chosenFunctionType === 'PowerLaw'){
    correct_barData = document.getElementById('lnx_Bar')
  } else {
    correct_barData = document.getElementById('xBar')
  }
  */

  console.log("mainDataContents:" + mainDataContents);
  console.log("xDataContents:" + xDataContents);
  console.log("guessDataContents:" + guessDataContents);
  console.log("hasSymmetricDist: " + hasSymmetricDist);
	console.log("hasEqualCont: " + hasEqualCont);
	console.log("hasOneSidedCont: " + hasOneSidedCont);
	console.log("hasInBetweenCont: " + hasInBetweenCont);
	console.log("hasWeights: " + hasWeights);
  console.log("chosenFunctionType: " + chosenFunctionType);
  //console.log(correct_barData);

  var request = $.ajax
      (
          {
              url: '/rcr/calculator/callFunctionalRCR',
              type: "POST",
              data: { mainData : mainDataContents,
                      xData : xDataContents,
                      guessData : guessDataContents,
                      symDist : hasSymmetricDist,
                      equalCont :  hasEqualCont,
                      oneSidedCont : hasOneSidedCont,
                      inBetweenCont : hasInBetweenCont,
                      weighted :  hasWeights,
                      functionType : chosenFunctionType
                    },
              dataType: "json",
              success: function(data, textStatus, jqXHR)
              {
                  console.log('yes');
      console.log(data);
                  document.getElementById('finalParameters').value = data['finalParametersData'];
                  document.getElementById('nonRejectedData').value = data['nonRejectedData'];
                  document.getElementById('rejectedData').value = data['rejectedData'];
                  document.getElementById('allData').value = data['allData'];

                  //convert results to lists of strings (for plotting)
                  var parameters_result = data['finalParametersData'].split("\n");
                  parameters_result = parameters_result.map(Number);

                  var nonRejArr = data['nonRejectedData'].split("\n");
                  var rejArr = data['rejectedData'].split("\n");

                  //adds number data to nonrejected and rejected x and y arrays
                  for (var i = 0; i < nonRejArr.length; i++) {
                    var dataSet = nonRejArr[i].split("\t");
                    x_nonrejected_result.push(Number(dataSet[0]));
                    y_nonrejected_result.push(Number(dataSet[1]));
                  }
                  for (var i = 0; i < rejArr.length; i++) {
                    var dataSet = rejArr[i].split("\t");
                    x_rejected_result.push(Number(dataSet[0]));
                    y_rejected_result.push(Number(dataSet[1]));

                  }
                  //for plotting the fitted function: (completes x_original_result)
                  x_original_result = xDataContents.split("\n");
                  //console.log(x_original_result);
                  if (x_original_result[x_original_result.length - 1] ===""){
                    x_original_result.pop();
                  }
                  x_original_result = x_original_result.map(Number);
                  //console.log(x_original_result);

                  //gets array of weights, as numbers in order:
                  var weights_result = [];
                  if (hasWeights){
                    var mainDataContents_arr = mainDataContents.split("\n");

                    for (var i = 0; i < x_original_result.length; i++){
                      var dataSet = mainDataContents_arr[i].split("\t");
                      weights_result.push(Number(dataSet[2]));
                    }
                  }


                  //creates data for fitted model (y_fitted_result)
                  switch (chosenFunctionType){
                    case "Linear":
                      var xBar = 0;
                      if (hasWeights){
                        xBar = getWeightedXBar(x_original_result, weights_result);
                      } else {
                        xBar = getXBar(x_original_result);
                      }
                      var a0 = parameters_result[0];
                      var a1 = parameters_result[1];

                      for (var i = 0; i < x_original_result.length; i++) {
                        var y_point = ( a0 + a1*(x_original_result[i] - xBar) )
                        y_fitted_result.push(y_point)
                      }
                      break;
                    case "Quadratic":

                      var xBar = 0;
                      if (hasWeights){
                        xBar = getWeightedXBar(x_original_result, weights_result);
                      } else {
                        xBar = getXBar(x_original_result);
                      }
                      var a0 = parameters_result[0];
                      var a1 = parameters_result[1];
                      var a2 = parameters_result[2];

                      for (var i = 0; i < x_original_result.length; i++) {
                        var y_point = ( a0 + a1*(x_original_result[i] - xBar) + a2*Math.pow((x_original_result[i] - xBar), 2.0))
                        y_fitted_result.push(y_point)
                      }
                      break;
                    case "Cubic":
                      var XBar = 0;
                      if (hasWeights){
                        XBar = getWeightedXBar(x_original_result, weights_result);
                      } else {
                        XBar = getXBar(x_original_result);
                      }
                      var a0 = parameters_result[0];
                      var a1 = parameters_result[1];
                      var a2 = parameters_result[2];
                      var a3 = parameters_result[3];

                      for (var i = 0; i < x_original_result.length; i++) {
                        var y_point = ( a0 + a1*(x_original_result[i] - xBar) + a2*Math.pow((x_original_result[i] - xBar), 2.0) + a3*Math.pow((x_original_result[i] - xBar), 3.0))
                        y_fitted_result.push(y_point)
                      }
                      break;
                    case "PowerLaw":
                      var lnXBar = 0;
                      if (hasWeights){
                        lnXBar = getWeightedLnXBar(x_original_result, weights_result);
                      } else {
                        lnXBar = getLnXBar(x_original_result);
                      }

                      var a0 = parameters_result[0];
                      var a1 = parameters_result[1];

                      for (var i = 0; i < x_original_result.length; i++) {
                        var y_point = ( a0*Math.pow((x_original_result[i]/Math.exp(lnXBar)), a1) )
                        y_fitted_result.push(y_point)
                      }
                      break;
                    case "Exponential":
                      var xBar = 0;
                      if (hasWeights){
                        xBar = getWeightedXBar(x_original_result, weights_result);
                      } else {
                        xBar = getXBar(x_original_result);
                      }
                      var a0 = parameters_result[0];
                      var a1 = parameters_result[1];

                      for (var i = 0; i < x_original_result.length; i++) {
                        var y_point = ( a0 * Math.exp(a1*(x_original_result[i]-xBar)) )
                        y_fitted_result.push(y_point)
                      }
                      break;
                    case "Logarithmic":
                      var xBar = 0;
                      if (hasWeights){
                        xBar = getWeightedXBar(x_original_result, weights_result);
                      } else {
                        xBar = getXBar(x_original_result);
                      }
                      var a0 = parameters_result[0];

                      for (var i = 0; i < x_original_result.length; i++) {
                        var y_point = ( a0 * Math.log(x_original_result[i] - xBar) )
                        y_fitted_result.push(y_point)
                      }
                      break;
                    default:
                      console.log("Error: no model function selected");
                  }



                  //console.log(data['rejTech']);


              },
              error: function (jqXHR, textStatus, errorThrown)
              {
                  console.log(errorThrown)
                  console.log('no');
                  console.log(jqXHR);
                  console.log(textStatus);
              }
          }
      );



  //this function will use a different parametric function, and corresponding c++ function based off of what parametric function was chosen
  }

function type(){
        $('#RCRNote').css('display','block');
        $('#NonRCRNote').css('display','none');
        $('#SelectContaminantSection').css('display','block');
        $('#OutputTableWrapper').css('display','inline');
        $('#LinearImage').css('display', 'none');
				$('#QuadraticImage').css('display', 'none');
				$('#CubicImage').css('display', 'none');
        $('#PowerLawImage').css('display', 'none');
				$('#ExponentialImage').css('display', 'none');
				$('#LogarithmicImage').css('display', 'none');
        $('#functionImage').css('display', 'none');
        $('#SymmetricImage').css('display', 'none');
        $('#AsymmetricImage').css('display', 'none');
        $('#Plot').css('display', 'none');
      	document.getElementById("SelectContaminantSectionTitle").innerHTML = "Select Contaminants:";
      	document.getElementById("PerformRCR").innerHTML = "Perform RCR!";
        $('#OutputTableWrapper').css('display','none');
        document.getElementById('nonRejectedData').value = '';
        document.getElementById('rejectedData').value = '';
        document.getElementById('allData').value = '';
        switch (true)
		{
            case ($('#Symmetric').data('clicked') && $('#Equal').data('clicked')):
				$('.RejectionMethods').css('display','none')
				$('#Option11').css('display','block');
				$('#OptionAll').css('display','block');
        $('#SymmetricImage').css('display', 'block');
                break;
			case ($('#Symmetric').data('clicked') &&  $('#OneSided').data('clicked')):
				$('.RejectionMethods').css('display','none')
				$('#Option12').css('display','block');
				$('#OptionAll').css('display','block');
        $('#SymmetricImage').css('display', 'block');
                break;
			case ($('#Symmetric').data('clicked') && $('#Between').data('clicked')):
				$('.RejectionMethods').css('display','none')
				$('#Option13').css('display','block');
				$('#OptionAll').css('display','block');
        $('#SymmetricImage').css('display', 'block');
                break;
			case ($('#Asymmetric').data('clicked')):
				$('.RejectionMethods').css('display','none')
				$('#Option2All').css('display','block');
				$('#OptionAll').css('display','block');
        $('#AsymmetricImage').css('display', 'block');
                break;

      case ($('#Linear').data('clicked')):
        $('#LinearImage').css('display', 'block');
                break;
      case ($('#Quadratic').data('clicked')):
        $('#QuadraticImage').css('display', 'block');
                break;
      case ($('#Cubic').data('clicked')):
        $('#CubicImage').css('display', 'block');
                break;
      case ($('#PowerLaw').data('clicked')):
        $('#PowerLawImage').css('display', 'block');
                break;
      case ($('#Exponential').data('clicked')):
        $('#ExponentialImage').css('display', 'block');
                break;
      case ($('#Logarithmic').data('clicked')):
        $('#LogarithmicImage').css('display', 'block');
                break;


      /*
			case ($('#Nongaussian').data('clicked')):
				$('.RejectionMethods').css('display','none')
				$('#Option3').css('display','block');
				$('#Option3Image').css('display', 'block');

                $('#RCRNote').css('display','none');
                $('#SelectContaminantSection').css('display','none');
        	$('#OutputTableWrapper').css('display','none');
      */

		document.getElementById("SelectContaminantSectionTitle").innerHTML = "We do not perform outlier rejection in this case.";
		document.getElementById("PerformRCR").innerHTML = "Characterize!";

                $('#NonRCRNote').css('display','block');

                break;
			default:
				$('.RejectionMethods').css('display','none')

        };
};
function outputSelection(){
       switch (true)
		{
            case ($('#showNonRejected').data('clicked')):
				$('#nonRejectedData').css('display','inline')
				$('#rejectedData').css('display','none');
				$('#allData').css('display','none');
                break;
            case ($('#showRejected').data('clicked')):
				$('#nonRejectedData').css('display','none')
				$('#rejectedData').css('display','inline');
				$('#allData').css('display','none');
                break;
            case ($('#showAll').data('clicked')):
				$('#nonRejectedData').css('display','none')
				$('#rejectedData').css('display','none');
				$('#allData').css('display','inline');
                break;
			default:
				$('.RejectionMethods').css('display','none')

        };
}

function toggleBool(button)	{
		if ($(button).data('clicked') === false)
		{
			$(button).data('clicked',true);
			return;
		}
		else if ($(button).data('clicked') === true)
		{
			$(button).data('clicked', false);
		}
	};

function SingleActiveButtonCheck(button1, button2){
	if ($(button1).data('clicked') === true && $(button2).data('clicked') === true)
	{
		toggleBool($(button2))
		$(button2).toggleClass('ButtonActive');
	}
};

function SingleActiveButtonCheckNoBool(button1, button2){
	if ($(button1).hasClass('ButtonActive')&& $(button2).hasClass('ButtonActive'))
	{
    //console.log(chosenFunctionType);
		$(button2).toggleClass('ButtonActive');
	}
};

function main(){

	$('#Symmetric').data('clicked',true);
	$('#Asymmetric').data('clicked',false);
	//$('#Nongaussian').data('clicked',false);

	$('#Equal').data('clicked',false);
	$('#Between').data('clicked',true);
	$('#OneSided').data('clicked',false);

	$('#Unweighted').data('clicked', true);
	$('#Weighted').data('clicked',false);

  $('#showNonRejected').data('clicked',true);
	$('#showRejected').data('clicked',false);
	$('#showAll').data('clicked',false);

	$('#showNonRejected').toggleClass('ButtonActive');
	$('#Symmetric').toggleClass('ButtonActive');
	$('#Between').toggleClass('ButtonActive');
	$('#Unweighted').toggleClass("ButtonActive");



	type();
    outputSelection();

    //the below are handlers for when buttons are clicked

    $('#Symmetric').click(function() {
        if ($('#Symmetric').data('clicked') === false)
        {
            toggleBool('#Symmetric');
            $('#Symmetric').toggleClass('ButtonActive');
            SingleActiveButtonCheck('#Symmetric','#Asymmetric');
            //SingleActiveButtonCheck('#Symmetric','#Nongaussian');
            type();
        }
	});
    $('#Asymmetric').click(function() {
        if ($('#Asymmetric').data('clicked') === false)
        {
            toggleBool('#Asymmetric');
            $('#Asymmetric').toggleClass('ButtonActive');
            SingleActiveButtonCheck('#Asymmetric','#Symmetric');
            //SingleActiveButtonCheck('#Asymmetric','#Nongaussian');
            type();
        }
    });
    /*
    $('#Nongaussian').click(function() {
        if ($('#Nongaussian').data('clicked') === false)
        {
            toggleBool('#Nongaussian');
            $('#Nongaussian').toggleClass('ButtonActive');
            SingleActiveButtonCheck('#Nongaussian','#Symmetric');
            SingleActiveButtonCheck('#Nongaussian','#Asymmetric');
            type();
        }
    });
    */
    $('#Equal').click(function() {
        if ($('#Equal').data('clicked') === false)
        {
            toggleBool('#Equal');
            $('#Equal').toggleClass('ButtonActive');
            SingleActiveButtonCheck('#Equal','#OneSided');
            SingleActiveButtonCheck('#Equal','#Between');
            type();
        }
    });
    $('#OneSided').click(function() {
        if ($('#OneSided').data('clicked') === false)
        {
            toggleBool('#OneSided');
            $('#OneSided').toggleClass('ButtonActive');
            SingleActiveButtonCheck('#OneSided','#Between');
            SingleActiveButtonCheck('#OneSided','#Equal');
            type();
        }
    });
    $('#Between').click(function() {
        if ($('#Between').data('clicked') === false)
        {
            toggleBool('#Between');
            $('#Between').toggleClass('ButtonActive');
            SingleActiveButtonCheck('#Between','#Equal');
            SingleActiveButtonCheck('#Between','#OneSided');
            type();
        }
    });

    $('#showNonRejected').click(function() {
        if ($('#showNonRejected').data('clicked') === false)
        {
            toggleBool('#showNonRejected');
            $('#showNonRejected').toggleClass('ButtonActive');
            SingleActiveButtonCheck('#showNonRejected','#showRejected');
            SingleActiveButtonCheck('#showNonRejected','#showAll');
            outputSelection();
        }
    });

    $('#showRejected').click(function() {
        if ($('#showRejected').data('clicked') === false)
        {
            toggleBool('#showRejected');
            $('#showRejected').toggleClass('ButtonActive');
            SingleActiveButtonCheck('#showRejected','#showNonRejected');
            SingleActiveButtonCheck('#showRejected','#showAll');
            outputSelection();
        }
    });

    $('#showAll').click(function() {
        if ($('#showAll').data('clicked') === false)
        {
            toggleBool('#showAll');
            $('#showAll').toggleClass('ButtonActive');
            SingleActiveButtonCheck('#showAll','#showNonRejected');
            SingleActiveButtonCheck('#showAll','#showRejected');
            outputSelection();
        }
    });

	$('#Unweighted').click(function()	{
        if ($('#Unweighted').data('clicked') === false)
        {
            $('#Unweighted').toggleClass("ButtonActive");
            toggleBool('#Unweighted');
            SingleActiveButtonCheck('#Unweighted','#Weighted');
        }
	});

	$('#Weighted').click(function()	{
        if ($('#Weighted').data('clicked') === false)
        {
            $('#Weighted').toggleClass("ButtonActive");
            toggleBool('#Weighted');
            SingleActiveButtonCheck('#Weighted','#Unweighted');
        }
	});

  $('#Linear').click(function()	{
        functionSelector('Linear');
        $('#Linear').toggleClass("ButtonActive");
        //console.log('hey')
        SingleActiveButtonCheckNoBool('#Linear','#Quadratic');
        SingleActiveButtonCheckNoBool('#Linear','#Cubic');
        SingleActiveButtonCheckNoBool('#Linear','#PowerLaw');
        SingleActiveButtonCheckNoBool('#Linear','#Exponential');
        SingleActiveButtonCheckNoBool('#Linear','#Logarithmic');

        $('#functionImage').css('display', 'inline');

        $('#LinearImage').css('display', 'inline');
				$('#QuadraticImage').css('display', 'none');
				$('#CubicImage').css('display', 'none');
        $('#PowerLawImage').css('display', 'none');
				$('#ExponentialImage').css('display', 'none');
				$('#LogarithmicImage').css('display', 'none');
	});

  $('#Quadratic').click(function()	{
        functionSelector('Quadratic');
        $('#Quadratic').toggleClass("ButtonActive");
        SingleActiveButtonCheckNoBool('#Quadratic','#Linear');
        SingleActiveButtonCheckNoBool('#Quadratic','#Cubic');
        SingleActiveButtonCheckNoBool('#Quadratic','#PowerLaw');
        SingleActiveButtonCheckNoBool('#Quadratic','#Exponential');
        SingleActiveButtonCheckNoBool('#Quadratic','#Logarithmic');

        $('#functionImage').css('display', 'inline');

        $('#LinearImage').css('display', 'none');
				$('#QuadraticImage').css('display', 'inline');
				$('#CubicImage').css('display', 'none');
        $('#PowerLawImage').css('display', 'none');
				$('#ExponentialImage').css('display', 'none');
				$('#LogarithmicImage').css('display', 'none');
	});

  $('#Cubic').click(function()	{
        functionSelector('Cubic');
        $('#Cubic').toggleClass("ButtonActive");
        SingleActiveButtonCheckNoBool('#Cubic','#Linear');
        SingleActiveButtonCheckNoBool('#Cubic','#Quadratic');
        SingleActiveButtonCheckNoBool('#Cubic','#PowerLaw');
        SingleActiveButtonCheckNoBool('#Cubic','#Exponential');
        SingleActiveButtonCheckNoBool('#Cubic','#Logarithmic');

        $('#functionImage').css('display', 'inline');

        $('#LinearImage').css('display', 'none');
				$('#QuadraticImage').css('display', 'none');
				$('#CubicImage').css('display', 'inline');
        $('#PowerLawImage').css('display', 'none');
				$('#ExponentialImage').css('display', 'none');
				$('#LogarithmicImage').css('display', 'none');
	});

  $('#PowerLaw').click(function()	{
        functionSelector('PowerLaw');
        $('#PowerLaw').toggleClass("ButtonActive");
        SingleActiveButtonCheckNoBool('#PowerLaw','#Linear');
        SingleActiveButtonCheckNoBool('#PowerLaw','#Quadratic');
        SingleActiveButtonCheckNoBool('#PowerLaw','#Cubic');
        SingleActiveButtonCheckNoBool('#PowerLaw','#Exponential');
        SingleActiveButtonCheckNoBool('#PowerLaw','#Logarithmic');

        $('#functionImage').css('display', 'inline');

        $('#LinearImage').css('display', 'none');
				$('#QuadraticImage').css('display', 'none');
				$('#CubicImage').css('display', 'none');
        $('#PowerLawImage').css('display', 'inline');
				$('#ExponentialImage').css('display', 'none');
				$('#LogarithmicImage').css('display', 'none');
	});

  $('#Exponential').click(function()	{
        functionSelector('Exponential');
        $('#Exponential').toggleClass("ButtonActive");
        SingleActiveButtonCheckNoBool('#Exponential','#Linear');
        SingleActiveButtonCheckNoBool('#Exponential','#Quadratic');
        SingleActiveButtonCheckNoBool('#Exponential','#Cubic');
        SingleActiveButtonCheckNoBool('#Exponential','#PowerLaw');
        SingleActiveButtonCheckNoBool('#Exponential','#Logarithmic');

        $('#functionImage').css('display', 'inline');

        $('#LinearImage').css('display', 'none');
				$('#QuadraticImage').css('display', 'none');
				$('#CubicImage').css('display', 'none');
        $('#PowerLawImage').css('display', 'none');
				$('#ExponentialImage').css('display', 'inline');
				$('#LogarithmicImage').css('display', 'none');
  });

  $('#Logarithmic').click(function()	{
        functionSelector('Logarithmic');
        $('#Logarithmic').toggleClass("ButtonActive");
        SingleActiveButtonCheckNoBool('#Logarithmic','#Linear');
        SingleActiveButtonCheckNoBool('#Logarithmic','#Quadratic');
        SingleActiveButtonCheckNoBool('#Logarithmic','#Cubic');
        SingleActiveButtonCheckNoBool('#Logarithmic','#PowerLaw');
        SingleActiveButtonCheckNoBool('#Logarithmic','#Exponential');

        $('#functionImage').css('display', 'inline');

        $('#LinearImage').css('display', 'none');
				$('#QuadraticImage').css('display', 'none');
				$('#CubicImage').css('display', 'none');
        $('#PowerLawImage').css('display', 'none');
				$('#ExponentialImage').css('display', 'none');
				$('#LogarithmicImage').css('display', 'inline');
  });



	var oldVal = "";
    $("#inputTextAreaData").on("change keyup paste", function()
    {
        var currentVal = $(this).val();
        if(currentVal == oldVal)
        {
            return; //check to prevent multiple simultaneous triggers
        }

        oldVal = currentVal;
        //action to be performed on textarea changed
        type();
    });

};

$(document).ready(main);

</script>
